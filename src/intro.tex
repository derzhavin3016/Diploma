Проектирование современных высокопроизводительных процессоров неразрывно связано с задачей подбора оптимальных параметров микроархитектуры, позволяющих добиться наилучшей производительности. Однако в силу большого числа конфигурационных параметров, формирующих пространство конфигураций; а также длительного времени симуляции на модели производительности процессора, данная задача становится нерешаемой за разумное время методом полного перебора всех точек пространства конфигураций. В связи с этим разрабатываются решения, позволяющие найти оптимальную конфигурацию процессора за меньшее время.

Большинство существующих подходов к решению задачи поиска оптимальной конфигурации микроархитектуры процессора можно разделить на два класса: решения, уменьшающие время одной симуляции и решения, ускоряющие сам алгоритм подбора. Методы первого класса предлагают использовать аппаратные решения~\cite{chiou2007fpga}, а также ряд оптимизаций на программном уровне~\cite{miller2010graphite}. Однако при значительном увеличении числа симуляций вследствие увеличения пространства конфигураций, ускорение, полученное данными методами, нивелируется. В то же время методы второго класса предлагают различные способы уменьшения числа симуляций, необходимых для нахождения оптимальной конфигурации, среди них присутствуют подходы с использованием машинного обучения~\cite{joseph2006construction,ipek2006efficiently,chen2014archranker}, а также RPStacks~\cite{lee2014rpstacks}.

В существующих работах, как правило, рассматривается варьирование микроархитектурных параметров высокого порядка (размер кэша, алгоритм предсказания условных переходов). Однако варьирование параметров микроархитектуры низкого порядка (к примеру, использование дополнительного бита в алгоритме предсказания) представляет наибольшую сложность на практике. Изменение одного параметра микроархитектуры низкого порядка не приводит к такому значительному изменению производительности процессора, как при изменении параметра высокого порядка. Однако одновременное изменение большого числа параметров низкого порядка может приводить к существенному приросту производительности процессора. Существующие решения не позволяют эффективно находить оптимальные конфигурации процессора с большим числом параметров низкого порядка. Эмпирические модели машинного обучения, используемые для предсказания производительности процессора, из-за нетривиального характера взаимного влияния параметров низкого порядка требуют большого числа запусков симуляции для обучения. В то время как подходы, основанные на RPStacks, имеют высокую сложность реализации, так как стандартные стеки задержек не покрывают эффективно параметры микроархитектуры низкого порядка.

В данной работе представлен метод подбора оптимальной конфигурации микроархитектуры процессора, основанный на отображении набора статистических данных, получаемых при симуляции, на параметры конфигурации. В представленном методе сравнение статистических значений с пороговыми значениями является триггером для соответствующего изменения параметра конфигурации. Пороговые значения, а также используемые статистические данные определяются на основе запусков инициализации алгоритма подбора.

Алгоритм подбора конфигурации на каждой итерации определяет ряд отклонившихся от пороговых значений статистических данных и запрашивает смену зависимых параметров микроархитектуры. В случае обнаружения падения производительности производится откат изменений и выбирается альтернативное направление следования в пространстве конфигураций, чтобы пропустить рассмотрение конфигураций, приводящих к падению производительности.

Данный подход позволяет более эффективно оценивать влияние параметров микроархитектуры низкого порядка на производительность процессора. Кроме того, как правило, статистические данные, используемые в представленном алгоритме подбора, появляются в больших промышленных и академических симуляторах производительности процессора естественным образом в ходе работы над улучшениями микроархитектуры.

В ходе работы была разработана многопоточная среда исполнения с поддержкой обобщённого интерфейса для симуляторов производительности процессора. В данной среде исполнения был реализован предложенный метод подбора оптимальной конфигурации микроархитектуры процессора. В качестве симулятора производительности использовалась модель суперскалярного процессора с внеочередным исполнением команд архитектуры ARM, основанная на симуляторе gem5~\cite{binkert2011gem5}. В результате анализа представленный метод подбора оптимальной конфигурации микроархитектуры процессора показал большую эффективность по сравнению с существующими решениями для подбора конфигураций с большим числом параметром микроархитектуры низкого порядка.

\section{Постановка задачи}

\input{src/task_description/desc}
